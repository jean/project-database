<metal:header metal:define-macro="header">
<h1 class="documentFirstHeading">PROJECTS A-Z</h1>
</metal:header>

<metal:folderlisting metal:define-macro="folderlisting" />
<metal:footer metal:define-macro="footer" />

<metal:body metal:define-macro="body">

<table class="table-fullwidth" 
    tal:define="projects python:context.getFolderContents(full_objects=True, contentFilter={'portal_type':'Project'})">
    <tr>
        <th i18n:tanslate="dbase_id">DBase ID</th>
        <th i18n:tanslate="gef_id">GEF ID</th>
        <th i18n:tanslate="focal_area">Focal Area</th>
        <th i18n:tanslate="project_title">Project Title</th>
        <th i18n:tanslate="country">Country</th>
        <th i18n:tanslate="project_type">Project Type</th>
    </tr>

    <tal:rep tal:repeat="project projects">
        <tr tal:define="geninfo nocall:project/project_general_info;
                        even repeat/project/even;
                        areavocab python:geninfo.getField('FocalArea').Vocabulary(geninfo);
                        areavalue python:geninfo.displayValue(areavocab, geninfo.getFocalArea());
                        countryvocab python:geninfo.getField('Country').Vocabulary(geninfo);
                        countryvalue python:geninfo.displayValue(countryvocab, geninfo.getCountry())"
                tal:attributes="class python:even and 'odd' or 'even'">
            <td>
                <a tal:content="project/title_or_id"
                    tal:attributes="href project/absolute_url">DBase ID
                </a></td>
            <td tal:content="geninfo/getGEFid | string:Unknown">GEF ID</td>
            <td tal:content="areavalue | string:Unknown">Focal Area</td>
            <td tal:content="geninfo/Title | string:Unknown">Project Title</td>
            <td tal:content="countryvalue | string:Unknown">Country</td>
            <td tal:content="geninfo/getProjectType | string:Unknown">Project Type</td>
        </tr>
    </tal:rep>
</table>

</metal:body>
